<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIの出力を検証する - AI駆動開発 上級編 | AI Tech Stack</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #dc2626 0%, #ea580c 50%, #f59e0b 100%);
        }
        .code-block {
            background: #1e293b;
            color: #e2e8f0;
        }
        .prompt-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 4px solid #f59e0b;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">
    <!-- ヘッダー -->
    <header class="gradient-bg text-white shadow-lg">
        <nav class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <a href="index.html" class="text-2xl font-bold">AI Tech Stack Dojo <span class="text-yellow-200">上級編</span></a>
                <div class="hidden md:flex space-x-6">
                    <a href="index.html" class="hover:text-yellow-200">ホーム</a>
                    <a href="ai-large-project.html" class="hover:text-yellow-200 font-bold">AI深化</a>
                    <a href="ai-architecture.html" class="hover:text-yellow-200">設計</a>
                    <a href="ai-testing.html" class="hover:text-yellow-200">テスト</a>
                    <a href="mcp-intro.html" class="hover:text-yellow-200">MCP</a>
                    <a href="project-design.html" class="hover:text-yellow-200">実践</a>
                </div>
            </div>
        </nav>
    </header>

    <!-- 進捗バー -->
    <div class="bg-white shadow">
        <div class="container mx-auto px-6 py-3">
            <div class="flex items-center justify-between text-sm">
                <span class="text-orange-600 font-bold">第1部：AI駆動開発の深化</span>
                <span class="text-gray-500">Step 4 / 36</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                <div class="bg-orange-500 h-2 rounded-full" style="width: 11%"></div>
            </div>
        </div>
    </div>

    <!-- メインコンテンツ -->
    <main class="container mx-auto px-6 py-12 max-w-4xl">
        <h1 class="text-4xl font-bold mb-8">AIの出力を検証する</h1>

        <!-- イントロ -->
        <div class="bg-orange-50 border-l-4 border-orange-500 p-6 mb-8">
            <p class="text-lg">AIは強力なツールですが、間違えることもあります。AIの出力を鵜呑みにせず、適切に検証することで、高品質なコードを維持できます。</p>
        </div>

        <!-- AIが間違えやすいパターン -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold mb-6 pb-2 border-b-2 border-orange-200">AIが間違えやすいパターン</h2>

            <div class="space-y-4">
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="font-bold text-red-600 mb-3">1. 存在しないAPIやライブラリの使用</h3>
                    <p class="text-sm text-gray-600 mb-2">AIは学習データに基づいて予測するため、実際には存在しない関数やメソッドを提案することがあります。</p>
                    <div class="code-block p-3 rounded text-sm font-mono">
<pre class="text-red-400"># 実際には存在しないメソッドを提案することがある
response = requests.get(url).json_auto_parse()  # ← 存在しない</pre>
                    </div>
                    <div class="mt-2 text-sm bg-green-50 p-2 rounded">
                        <strong>確認方法：</strong> 公式ドキュメントで関数名を検索、または実際に実行して確認
                    </div>
                </div>

                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="font-bold text-red-600 mb-3">2. バージョン違いによる非互換コード</h3>
                    <p class="text-sm text-gray-600 mb-2">古いバージョンの書き方や、まだリリースされていない新機能を使うことがあります。</p>
                    <div class="code-block p-3 rounded text-sm font-mono">
<pre class="text-red-400"># Next.js 12 の書き方を Next.js 14 で提案することも
export async function getServerSideProps() { }  # App Router では非推奨</pre>
                    </div>
                    <div class="mt-2 text-sm bg-green-50 p-2 rounded">
                        <strong>確認方法：</strong> 使用中のバージョンを明示的に伝える、公式のマイグレーションガイドを確認
                    </div>
                </div>

                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="font-bold text-red-600 mb-3">3. セキュリティ上の問題</h3>
                    <p class="text-sm text-gray-600 mb-2">SQLインジェクション、XSS、機密情報のハードコードなど、セキュリティ的に問題のあるコードを生成することがあります。</p>
                    <div class="code-block p-3 rounded text-sm font-mono">
<pre class="text-red-400"># 危険なパターン
query = f"SELECT * FROM users WHERE id = {user_input}"  # SQLインジェクション
API_KEY = "sk-xxxxxxxxxxxx"  # ハードコードされた機密情報</pre>
                    </div>
                    <div class="mt-2 text-sm bg-green-50 p-2 rounded">
                        <strong>確認方法：</strong> OWASP Top 10を意識、環境変数の使用、パラメータ化クエリの使用
                    </div>
                </div>

                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="font-bold text-red-600 mb-3">4. エッジケースの見落とし</h3>
                    <p class="text-sm text-gray-600 mb-2">null/undefined、空配列、境界値などの処理が抜けていることがあります。</p>
                    <div class="code-block p-3 rounded text-sm font-mono">
<pre class="text-red-400"># 配列が空の場合を考慮していない
const average = items.reduce((a, b) => a + b) / items.length  # items が空だとエラー</pre>
                    </div>
                    <div class="mt-2 text-sm bg-green-50 p-2 rounded">
                        <strong>確認方法：</strong> 「空の場合は？」「nullの場合は？」と追加で質問
                    </div>
                </div>

                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="font-bold text-red-600 mb-3">5. パフォーマンスの問題</h3>
                    <p class="text-sm text-gray-600 mb-2">N+1クエリ、不要な再レンダリング、メモリリークなど、動作はするが効率が悪いコードを生成することがあります。</p>
                    <div class="code-block p-3 rounded text-sm font-mono">
<pre class="text-red-400"># N+1 クエリ問題
for user in users:
    posts = db.query(Post).filter(Post.user_id == user.id).all()  # ループ内でクエリ</pre>
                    </div>
                    <div class="mt-2 text-sm bg-green-50 p-2 rounded">
                        <strong>確認方法：</strong> 「パフォーマンスの観点で問題はありますか？」と質問
                    </div>
                </div>
            </div>
        </section>

        <!-- 検証のチェックリスト -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold mb-6 pb-2 border-b-2 border-orange-200">検証のチェックリスト</h2>

            <div class="bg-white p-6 rounded-lg shadow">
                <div class="space-y-4">
                    <div class="p-4 bg-gray-50 rounded">
                        <h3 class="font-bold mb-2">基本チェック</h3>
                        <ul class="text-sm space-y-1">
                            <li><input type="checkbox" class="mr-2">コードが実際に動作するか（実行してエラーがないか）</li>
                            <li><input type="checkbox" class="mr-2">インポートしているライブラリは存在するか</li>
                            <li><input type="checkbox" class="mr-2">使用している関数・メソッドは実在するか</li>
                            <li><input type="checkbox" class="mr-2">既存コードとの整合性は取れているか</li>
                        </ul>
                    </div>
                    <div class="p-4 bg-gray-50 rounded">
                        <h3 class="font-bold mb-2">セキュリティチェック</h3>
                        <ul class="text-sm space-y-1">
                            <li><input type="checkbox" class="mr-2">ユーザー入力を直接SQLに埋め込んでいないか</li>
                            <li><input type="checkbox" class="mr-2">機密情報（APIキー等）がハードコードされていないか</li>
                            <li><input type="checkbox" class="mr-2">認証・認可のチェックは適切か</li>
                            <li><input type="checkbox" class="mr-2">XSS対策（エスケープ処理）はされているか</li>
                        </ul>
                    </div>
                    <div class="p-4 bg-gray-50 rounded">
                        <h3 class="font-bold mb-2">品質チェック</h3>
                        <ul class="text-sm space-y-1">
                            <li><input type="checkbox" class="mr-2">エラーハンドリングは適切か</li>
                            <li><input type="checkbox" class="mr-2">null/undefined の処理は考慮されているか</li>
                            <li><input type="checkbox" class="mr-2">既存のコーディング規約に従っているか</li>
                            <li><input type="checkbox" class="mr-2">不要なコードや冗長な処理はないか</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- AIに検証を依頼 -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold mb-6 pb-2 border-b-2 border-orange-200">AIに自己検証を依頼する</h2>

            <p class="mb-4">AIが生成したコードに対して、AI自身にレビューを依頼することで、問題を発見できることがあります。</p>

            <div class="prompt-box p-4 rounded mb-6">
                <h4 class="font-bold mb-2">セルフレビューを依頼</h4>
                <div class="code-block p-4 rounded font-mono text-sm overflow-x-auto">
<pre>今書いてくれたコードについて、以下の観点でレビューしてください：

1. セキュリティ上の問題はありますか？
2. エラーハンドリングは十分ですか？
3. エッジケース（null、空配列など）は考慮されていますか？
4. パフォーマンス上の問題はありますか？
5. 改善できる点はありますか？</pre>
                </div>
            </div>

            <div class="prompt-box p-4 rounded mb-6">
                <h4 class="font-bold mb-2">特定の観点でチェックを依頼</h4>
                <div class="code-block p-4 rounded font-mono text-sm overflow-x-auto">
<pre>このコードにSQLインジェクションの脆弱性はありますか？
問題がある場合は、安全なコードに修正してください。</pre>
                </div>
            </div>

            <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4">
                <p><strong>注意：</strong>AIの自己レビューは万能ではありません。最終的な判断は人間が行い、特に重要なセキュリティ面は専門家のレビューも検討してください。</p>
            </div>
        </section>

        <!-- テストで検証 -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold mb-6 pb-2 border-b-2 border-orange-200">テストで検証する</h2>

            <p class="mb-4">AIが生成したコードにテストを書いてもらい、動作を検証します。</p>

            <div class="prompt-box p-4 rounded mb-6">
                <h4 class="font-bold mb-2">テストコードの生成を依頼</h4>
                <div class="code-block p-4 rounded font-mono text-sm overflow-x-auto">
<pre>今作成した関数のテストを書いてください。
以下のケースを含めてください：

1. 正常系：期待通りの入力で期待通りの出力が得られる
2. 異常系：不正な入力でエラーが発生する
3. 境界値：0、空文字列、空配列などの境界ケース
4. エッジケース：null、undefined、特殊文字など</pre>
                </div>
            </div>

            <div class="bg-white p-6 rounded-lg shadow">
                <h3 class="font-bold mb-3">テストの実行例</h3>
                <div class="code-block p-4 rounded font-mono text-sm overflow-x-auto">
<pre># バックエンド（Python / pytest）
pytest tests/ -v

# フロントエンド（Jest）
npm test

# E2Eテスト（Playwright）
npx playwright test</pre>
                </div>
            </div>
        </section>

        <!-- 実践的な検証フロー -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold mb-6 pb-2 border-b-2 border-orange-200">実践的な検証フロー</h2>

            <div class="space-y-4">
                <div class="bg-white p-4 rounded-lg shadow flex items-start">
                    <div class="bg-orange-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold mr-4 flex-shrink-0">1</div>
                    <div>
                        <h4 class="font-bold">コード生成</h4>
                        <p class="text-sm text-gray-600">AIにコードを生成してもらう</p>
                    </div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow flex items-start">
                    <div class="bg-orange-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold mr-4 flex-shrink-0">2</div>
                    <div>
                        <h4 class="font-bold">目視確認</h4>
                        <p class="text-sm text-gray-600">明らかなおかしい点がないか、ざっと確認</p>
                    </div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow flex items-start">
                    <div class="bg-orange-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold mr-4 flex-shrink-0">3</div>
                    <div>
                        <h4 class="font-bold">実行テスト</h4>
                        <p class="text-sm text-gray-600">実際に動かしてエラーが出ないか確認</p>
                    </div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow flex items-start">
                    <div class="bg-orange-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold mr-4 flex-shrink-0">4</div>
                    <div>
                        <h4 class="font-bold">セルフレビュー依頼</h4>
                        <p class="text-sm text-gray-600">「このコードに問題はありますか？」とAIに聞く</p>
                    </div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow flex items-start">
                    <div class="bg-orange-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold mr-4 flex-shrink-0">5</div>
                    <div>
                        <h4 class="font-bold">テストコード生成・実行</h4>
                        <p class="text-sm text-gray-600">自動テストで動作を検証</p>
                    </div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow flex items-start">
                    <div class="bg-orange-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold mr-4 flex-shrink-0">6</div>
                    <div>
                        <h4 class="font-bold">問題があれば修正依頼</h4>
                        <p class="text-sm text-gray-600">発見した問題を伝えて修正してもらう</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- まとめ -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold mb-6 pb-2 border-b-2 border-orange-200">まとめ</h2>
            <div class="bg-orange-50 p-6 rounded-lg">
                <ul class="space-y-3">
                    <li class="flex items-start">
                        <span class="text-orange-600 mr-2">✓</span>
                        <span><strong>AIは間違える</strong> - 存在しないAPI、バージョン違い、セキュリティ問題など</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-orange-600 mr-2">✓</span>
                        <span><strong>チェックリストを使う</strong> - 基本、セキュリティ、品質の観点で確認</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-orange-600 mr-2">✓</span>
                        <span><strong>AIに自己レビューさせる</strong> - 「問題はありますか？」と聞く</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-orange-600 mr-2">✓</span>
                        <span><strong>テストで検証</strong> - 自動テストで動作を確認</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-orange-600 mr-2">✓</span>
                        <span><strong>最終判断は人間</strong> - 特にセキュリティは慎重に</span>
                    </li>
                </ul>
            </div>
        </section>

        <!-- ナビゲーション -->
        <div class="flex justify-between items-center pt-8 border-t">
            <a href="task-decomposition.html" class="flex items-center text-gray-600 hover:text-orange-600">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
                複雑なタスクの分解術
            </a>
            <a href="ai-architecture.html" class="flex items-center bg-orange-500 text-white px-6 py-3 rounded-lg hover:bg-orange-600">
                次へ：AIに設計を相談する
                <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </a>
        </div>
    </main>

    <!-- フッター -->
    <footer class="bg-gray-800 text-white py-8 mt-12">
        <div class="container mx-auto px-6 text-center">
            <p class="text-gray-400">AI駆動開発 上級編</p>
        </div>
    </footer>
</body>
</html>
